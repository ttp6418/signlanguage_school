<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원가입</title>
    <!-- font icons -->
    <link rel="stylesheet" href="{% static 'vendors/themify-icons/css/themify-icons.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <!-- jquery 사용하기 위해 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <style type="text/css">
        th, td {
            padding: 5px;
        }
    </style>
</head>
<body>
    <form action="signup_logic" method="POST">
        <div align="center">
            <a href="/">
                <svg xmlns="http://www.w3.org/2000/svg" width="200" height="100" fill="currentColor" class="bi bi-person-workspace" viewBox="0 0 16 16">
                    <path d="M4 16s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H4Zm4-5.95a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"/>
                    <path d="M2 1a2 2 0 0 0-2 2v9.5A1.5 1.5 0 0 0 1.5 14h.653a5.373 5.373 0 0 1 1.066-2H1V3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v9h-2.219c.554.654.89 1.373 1.066 2h.653a1.5 1.5 0 0 0 1.5-1.5V3a2 2 0 0 0-2-2H2Z"/>
                </svg>
            </a>
            <div>회원정보를 입력해주세요</div>
            <table style="width: 450px;" >
                <tr><td>
                    <input type="text" name="username" style="width:330px;height:38px;"
                                    maxlength="80"
                                    name="join-id-inpu"
                                    id="join-id-input"
                                    aria-label="*아이디"
                                    placeholder="*아이디" />
                    <button type='button' onclick="idCheck()" class='btn btn-primary' style="width:100px;height:38px;" >중복 확인</button>
                    <h6>*아이디 [중복확인 필요]</h6>
                </td></tr>
                {% csrf_token %}
                <tr><td><input type="password" class="form-control" name="password1"
                                maxlength="80"
                                id="password1-input" value=""
                                aria-label="*비밀번호"
                                placeholder="*비밀번호 <8자이상/ 영문 or 한글조합 필수>" /><span  aria-hidden="true"
                                        style="display:none;">*비밀번호 [8자이상]</span><h6>*비밀번호 [8자이상/ 영문 or 한글조합 필수]</h6></td></tr>
                <tr><td><input type="password" class="form-control" name="password2"
                                maxlength="80"
                                id="password2-input" value=""
                                aria-label="*비밀번호 확인"
                                onkeyup="passwordCheckMessage()"
                                placeholder="*비밀번호 확인" />
                                <h6>*비밀번호 확인</h6>
                                <h6 style="color: red;" id="passwordCheckMessage"></h6>
                </td></tr>
                <tr><td><input type="text" class="form-control" name="name"
                                maxlength="80"
                                id="join-email-input" value=""
                                aria-label="*이름"
                                placeholder="*이름" /><span  aria-hidden="true"
                                        style="display:none;">*이름</span>
                                        <h6>*이름</h6></td></tr>
                <tr><td><input type="text" class="form-control" name="nickname"
                                maxlength="80"
                                id="join-email-input" value=""
                                aria-label="*닉네임"
                                placeholder="*닉네임" /><span  aria-hidden="true"
                                        style="display:none;">*닉네임</span>
                                        <h6>*닉네임</h6></td></tr>
                <tr><td><input type="email" class="form-control" name="email"
                                maxlength="80"
                                id="join-email-input" value=""
                                aria-label="이메일"
                                placeholder="이메일" /><span  aria-hidden="true"
                                        style="display:none;">*이메일</span>
                                        <h6>*이메일 [비밀번호 찾기에 사용됩니다]</h6></td></tr>
                <tr><td><select class="form-select" name="language" style="width: 100%; heigt: 100%">언어선택
                    <option value="한국어">한국어</option>
                    <option value="English">영어</option>
                    </select>
                    <h6>*언어선택</h6></td></tr>
                <tr>
                    <td>
                    <p class="fs-5">
                        <input type="checkbox" id="checkAll" name="checkAll">모두 확인하였으며 동의합니다.</p>
                        <p class="fs-6">
                        전체 동의에는 필수 및 선택 정보에 대한 동의가 포함되어 있으며, 개별적으로 동의를 선택 하실 수 있습니다. 선택 항목에 대한 동의를 거부하시는 경우에도 서비스 이용이 가능합니다.</p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="border border-primary" style="padding: 10px;">
                            <table>
                                <tr><td width="90%"><input type="checkbox" id="check1" name="check1">
                                    [필수] 개인정보 수집 및 이용 동의
                                    <div class="box" style="height: 28px; background:#D3D3D3;">
                                        &emsp;상세내용을 반드시 확인해 주세요.&emsp;
                                        <a href='info_accept' target='_blank'><i class="ti-hand-open"></i> 펼쳐보기</a>
                                    </div>
                                </td></tr>
                                <tr><td><input type="checkbox" id="check2" name="check2">
                                    [필수] 개인정보 제3자 제공 동의
                                    <div class="box" style="height: 28px; background:#D3D3D3; ">
                                        &emsp;상세내용을 반드시 확인해 주세요.&emsp;
                                        <a href='info_third_accept' target='_blank'><i class="ti-hand-open"></i> 펼쳐보기</a>
                                    </div></td></tr></table>
                        </div></td>
                </tr>
                <tr><td><div class="d-grid gap-2 col-6 mx-auto" style="width: 100%;">
                    <form>
                        {{ form.as_p }}
                        <script src='https://www.google.com/recaptcha/api.js'></script>
                        <div class="g-recaptcha" data-sitekey="6LfllG4jAAAAAHl2gmj51tnVeIKQArzfQ0g2RdnL"></div>
                    </form>
                <input class="btn btn-primary" type="submit" value="동의하고 가입하기", action="signup"></button></div></td></td>
            </div>
            </table>

        </div>
    </form>
    <script>
        // '전체선택' 체크박스 값 변경 이벤트
        const chkAll = document.querySelector("#checkAll");
        const chk1 = document.querySelector("#check1");
        const chk2 = document.querySelector("#check2");
        chkAll.addEventListener("change", () => {  
            chk1.checked = chkAll.checked
            chk2.checked = chkAll.checked
        });

        function idCheck(){
            var userID = document.querySelector("#join-id-input").value;

            const header = '${_csrf.headerName}';
            $.ajax({
                type: 'POST',
                url : 'idCheck',
                dataType:'json',
                data: {userID:userID},

                success: function(result){
                    console.log("ajax 통신 성공");
                    alert(result['msg']);
                }
            })
        
        }

        function passwordCheckMessage(){
            var userPassword1 = $('#password1-input').val();
            var userPassword2 = $('#password2-input').val();
            if(userPassword1 != userPassword2){
                $('#passwordCheckMessage').html('비밀번호가 서로 일치하지 않습니다.');
            }else{
                $('#passwordCheckMessage').html('');
            }
        }

    </script>
</body>
</html>